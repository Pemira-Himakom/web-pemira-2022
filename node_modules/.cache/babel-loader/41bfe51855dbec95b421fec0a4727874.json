{"ast":null,"code":"import { animate } from './index.mjs';\nimport { velocityPerSecond } from '../utils/velocity-per-second.mjs';\nimport { getFrameData } from 'framesync';\nfunction inertia(_ref) {\n  let {\n    from = 0,\n    velocity = 0,\n    min,\n    max,\n    power = 0.8,\n    timeConstant = 750,\n    bounceStiffness = 500,\n    bounceDamping = 10,\n    restDelta = 1,\n    modifyTarget,\n    driver,\n    onUpdate,\n    onComplete,\n    onStop\n  } = _ref;\n  let currentAnimation;\n  function isOutOfBounds(v) {\n    return min !== undefined && v < min || max !== undefined && v > max;\n  }\n  function boundaryNearest(v) {\n    if (min === undefined) return max;\n    if (max === undefined) return min;\n    return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n  }\n  function startAnimation(options) {\n    currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n    currentAnimation = animate(Object.assign(Object.assign({}, options), {\n      driver,\n      onUpdate: v => {\n        var _a;\n        onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(v);\n        (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, v);\n      },\n      onComplete,\n      onStop\n    }));\n  }\n  function startSpring(options) {\n    startAnimation(Object.assign({\n      type: \"spring\",\n      stiffness: bounceStiffness,\n      damping: bounceDamping,\n      restDelta\n    }, options));\n  }\n  if (isOutOfBounds(from)) {\n    startSpring({\n      from,\n      velocity,\n      to: boundaryNearest(from)\n    });\n  } else {\n    let target = power * velocity + from;\n    if (typeof modifyTarget !== \"undefined\") target = modifyTarget(target);\n    const boundary = boundaryNearest(target);\n    const heading = boundary === min ? -1 : 1;\n    let prev;\n    let current;\n    const checkBoundary = v => {\n      prev = current;\n      current = v;\n      velocity = velocityPerSecond(v - prev, getFrameData().delta);\n      if (heading === 1 && v > boundary || heading === -1 && v < boundary) {\n        startSpring({\n          from: v,\n          to: boundary,\n          velocity\n        });\n      }\n    };\n    startAnimation({\n      type: \"decay\",\n      from,\n      velocity,\n      timeConstant,\n      power,\n      restDelta,\n      modifyTarget,\n      onUpdate: isOutOfBounds(target) ? checkBoundary : undefined\n    });\n  }\n  return {\n    stop: () => currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop()\n  };\n}\nexport { inertia };","map":{"version":3,"names":["animate","velocityPerSecond","getFrameData","inertia","from","velocity","min","max","power","timeConstant","bounceStiffness","bounceDamping","restDelta","modifyTarget","driver","onUpdate","onComplete","onStop","currentAnimation","isOutOfBounds","v","undefined","boundaryNearest","Math","abs","startAnimation","options","stop","Object","assign","_a","call","startSpring","type","stiffness","damping","to","target","boundary","heading","prev","current","checkBoundary","delta"],"sources":["/Users/opam/web-pemira/node_modules/popmotion/dist/es/animations/inertia.mjs"],"sourcesContent":["import { animate } from './index.mjs';\nimport { velocityPerSecond } from '../utils/velocity-per-second.mjs';\nimport { getFrameData } from 'framesync';\n\nfunction inertia({ from = 0, velocity = 0, min, max, power = 0.8, timeConstant = 750, bounceStiffness = 500, bounceDamping = 10, restDelta = 1, modifyTarget, driver, onUpdate, onComplete, onStop, }) {\n    let currentAnimation;\n    function isOutOfBounds(v) {\n        return (min !== undefined && v < min) || (max !== undefined && v > max);\n    }\n    function boundaryNearest(v) {\n        if (min === undefined)\n            return max;\n        if (max === undefined)\n            return min;\n        return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n    }\n    function startAnimation(options) {\n        currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n        currentAnimation = animate(Object.assign(Object.assign({}, options), { driver, onUpdate: (v) => {\n                var _a;\n                onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(v);\n                (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, v);\n            }, onComplete,\n            onStop }));\n    }\n    function startSpring(options) {\n        startAnimation(Object.assign({ type: \"spring\", stiffness: bounceStiffness, damping: bounceDamping, restDelta }, options));\n    }\n    if (isOutOfBounds(from)) {\n        startSpring({ from, velocity, to: boundaryNearest(from) });\n    }\n    else {\n        let target = power * velocity + from;\n        if (typeof modifyTarget !== \"undefined\")\n            target = modifyTarget(target);\n        const boundary = boundaryNearest(target);\n        const heading = boundary === min ? -1 : 1;\n        let prev;\n        let current;\n        const checkBoundary = (v) => {\n            prev = current;\n            current = v;\n            velocity = velocityPerSecond(v - prev, getFrameData().delta);\n            if ((heading === 1 && v > boundary) ||\n                (heading === -1 && v < boundary)) {\n                startSpring({ from: v, to: boundary, velocity });\n            }\n        };\n        startAnimation({\n            type: \"decay\",\n            from,\n            velocity,\n            timeConstant,\n            power,\n            restDelta,\n            modifyTarget,\n            onUpdate: isOutOfBounds(target) ? checkBoundary : undefined,\n        });\n    }\n    return {\n        stop: () => currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop(),\n    };\n}\n\nexport { inertia };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}